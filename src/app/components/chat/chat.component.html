<div class="chat-container">
  <header>
    <div class="branding">
      <span>ğŸ©</span><h1>Agent Concierge</h1>
    </div>
    <p class="instructions">
      Ask me about <strong>day trips</strong>, <strong>restaurants</strong>, <strong>weekend events</strong>, or <strong>transportation routes</strong>. I'll connect you with the right specialist!
    </p>
  </header>

  <main class="message-list" role="log" aria-live="polite">
    @for (message of messages(); track message.timestamp) {
      <div class="message-wrapper" [class.user-wrapper]="message.sender === 'user'" [class.ai-wrapper]="message.sender === 'ai'">
        @if (message.sender === 'ai') {
          <div class="message-avatar ai-avatar">
            <span>ğŸ©</span>
          </div>
        }
        <div class="message" [class.user-message]="message.sender === 'user'" [class.ai-message]="message.sender === 'ai'">
          <div class="message-content">
            @if (message.formattedText) {
              <div [innerHTML]="message.formattedText"></div>
            } @else {
              <span class="message-text">{{ message.text }}</span>
            }
          </div>
        </div>
        @if (message.sender === 'user') {
          <div class="message-avatar user-avatar">
            <span>ğŸ‘¤</span>
          </div>
        }
      </div>
    }
    @if (isLoading()) {
      <div class="message-wrapper ai-wrapper">
        <div class="message-avatar ai-avatar">
          <span>ğŸ©</span>
        </div>
        <div class="message ai-message loading">
          <div class="message-content">
            <span class="message-text">Thinking</span>
          </div>
        </div>
      </div>
    }
  </main>

  <footer>
    <form (submit)="sendMessage(); $event.preventDefault()" class="input-area">
      <input
        type="text"
        [formControl]="queryControl"
        placeholder="ğŸ’¬ Type your request here..."
        class="form-control"
        aria-label="Chat message"
      />
      <button type="submit" class="btn btn-primary" [disabled]="queryControl.invalid || isLoading()">
        <span class="button-content">
          @if (isLoading()) {
            <span>â³</span>
          } @else {
            <span>ğŸš€ Send</span>
          }
        </span>
      </button>
    </form>
  </footer>
</div>
